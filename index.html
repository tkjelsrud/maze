<html>
<head>
  <style>
    .maze {
      width: 100%;
      height: 100%;
      margin: 0;
    }
    .row {
      float: left;
      display: block;
    }
    .tile {
      float: left;
      height: 32px;
      width: 32px;
      border: 1px solid grey;
    }
  </style>
  <script type="text/javascript">
    var glob = {'tw': 34, 'th': 34, 'data': []};
    
    function drawMaze() {
      let d = document.getElementById("maze");
      
      cx = Math.floor(window.innerWidth / glob.tw);
      cy = Math.floor(window.innerHeight / glob.th);
      //alert(cx + " " + cy);
      
      for(let y = 0; y < cy; y++) {
        let r = document.createElement("div");
        r.className = "row";
        glob.data.push(new Array());
        
       	for(let x = 0; x < cx; x++) {
          glob.data[y].push("0");
          
          let t = document.createElement("div");
          t.id = y + "_" + x;
          t.className = "tile";
          /*t.addEventListener('touchstart', function (event) {
            event.target.style.backgroundColor = "#999";
          });*/
          t.addEventListener('click', function (event) {
            if(event.target.style.backgroundColor == "red") {
              event.target.style.backgroundColor = "white";
              setData(event.target.id, "0");
            }
            else {
              event.target.style.backgroundColor = "red";
              setData(event.target.id, "1");
            }
          });
          
          r.appendChild(t);
        }
        d.appendChild(r);
      }
    }
    
    function setData(ident, val) {
      let x, y = ident.split("_");
      //alert(x + " " + y + " = " + val);
    }
  </script>
</head>

<body>
  <div id="maze">
    
  </div>
  <script type="text/javascript">
    window.onload = (event) => {
    	drawMaze();
    };
  </script>
</body>
</html>
